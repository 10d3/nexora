// Refund model
model Refund {
    id        String       @id @default(cuid())
    orderId   String
    order     Order        @relation(fields: [orderId], references: [id])
    amount    Float
    reason    String?
    status    RefundStatus @default(PENDING)
    tenantId  String
    tenant    Tenant       @relation(fields: [tenantId], references: [id], onDelete: Cascade)
    createdAt DateTime     @default(now())
    updatedAt DateTime     @updatedAt
    createdBy String?

    @@index([orderId])
    @@index([tenantId])
    @@index([status])
    @@index([createdAt])
}

model AuditLog {
    id          String      @id @default(cuid())
    action      AuditAction
    modelName   String
    recordId    String
    oldData     Json?
    newData     Json?
    createdById String?
    createdBy   User?       @relation("CreatedBy", fields: [createdById], references: [id])
    updatedById String?
    updatedBy   User?       @relation("UpdatedBy", fields: [updatedById], references: [id])
    tenantId    String
    tenant      Tenant      @relation(fields: [tenantId], references: [id], onDelete: Cascade)
    createdAt   DateTime    @default(now())

    @@index([tenantId])
    @@index([createdById])
    @@index([updatedById])
    @@index([modelName, recordId])
    @@index([createdAt])
    @@index([action])
}
